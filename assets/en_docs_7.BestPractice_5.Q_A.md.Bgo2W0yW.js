import{_ as i,c as a,o as t,a4 as e}from"./chunks/framework.DirjshaF.js";const n="/mxcad_docs/assets/%E6%B7%BB%E5%8A%A0%E5%AD%97%E4%BD%93%E6%96%87%E4%BB%B6.CSqTCqkD.jpg",h="/mxcad_docs/assets/%E6%B8%85%E9%99%A4%E7%BC%93%E5%AD%98.BJ_q6Hed.png",l="/mxcad_docs/assets/%E6%9F%A5%E7%9C%8B%E7%89%88%E6%9C%AC%E5%8F%B7.GF2ydq8Y.jpg",p="/mxcad_docs/assets/%E5%9C%A8%E7%BA%BF%E7%9A%84demo%E7%89%88%E6%9C%AC.URLX1wPj.jpg",k="/mxcad_docs/assets/%E7%BB%98%E5%88%B6UI%E7%95%8C%E9%9D%A2.De2Oa4Yu.jpg",r="/mxcad_docs/assets/%E6%8F%92%E5%85%A5UI.C1Em5VCc.jpg",d="/mxcad_docs/assets/%E6%B7%BB%E5%8A%A0%E5%AD%97%E4%BD%93%E6%96%87%E4%BB%B6-mxcad.h61527az.jpg",o="/mxcad_docs/assets/%E6%9B%BF%E6%8D%A22d.gNtX1B5Q.jpg",E="/mxcad_docs/assets/%E6%9B%BF%E6%8D%A22d-st.BXjKwq89.jpg",c="/mxcad_docs/assets/%E8%AF%BB%E5%8F%96%E6%89%A9%E5%B1%95%E6%95%B0%E6%8D%AE.CX3CvAET.jpg",g="/mxcad_docs/assets/%E6%9B%B4%E6%96%B0MxCADAPP%E7%89%88%E6%9C%AC.B_ITgVdr.jpg",x=JSON.parse('{"title":"Frequently Asked Questions","description":"","frontmatter":{},"headers":[],"relativePath":"en/docs/7.BestPractice/5.Q&A.md","filePath":"en/docs/7.BestPractice/5.Q&A.md"}'),y={name:"en/docs/7.BestPractice/5.Q&A.md"};function F(u,s,m,f,C,b){return t(),a("div",null,[...s[0]||(s[0]=[e(`<h1 id="frequently-asked-questions" tabindex="-1">Frequently Asked Questions <a class="header-anchor" href="#frequently-asked-questions" aria-label="Permalink to &quot;Frequently Asked Questions&quot;">​</a></h1><h2 id="drawing" tabindex="-1">Drawing <a class="header-anchor" href="#drawing" aria-label="Permalink to &quot;Drawing&quot;">​</a></h2><h3 id="_1-drawing-cannot-be-displayed" tabindex="-1">1. Drawing cannot be displayed <a class="header-anchor" href="#_1-drawing-cannot-be-displayed" aria-label="Permalink to &quot;1. Drawing cannot be displayed&quot;">​</a></h3><p>Keep mxcad mxdraw and development kit] <a href="https://www.mxdraw.com/download.html" target="_blank" rel="noreferrer">mxdraw cloud</a> is the latest version,</p><p>When the drawing cannot be displayed and the browser console does not report an error, it is generally a version problem.</p><p>Update to the latest version:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mxcad@latest</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mxdraw@latest</span></span></code></pre></div><h3 id="_2-drawing-display-error" tabindex="-1">2. Drawing display error <a class="header-anchor" href="#_2-drawing-display-error" aria-label="Permalink to &quot;2. Drawing display error&quot;">​</a></h3><p>If you open the converted sample drawing provided by us, it is normal to open, but your own converted drawing cannot be displayed partially or not at all.</p><p>Then you can convert several more drawings. If there is only a problem with this drawing, it may be that the conversion program&#39;s support for this drawing is not perfect. You can send this drawing to the customer service so that we can fix this problem.</p><h3 id="_3-how-to-modify-the-default-open-drawing-in-mxcad-integration-project" tabindex="-1">3. How to modify the default open drawing in mxcad integration project <a class="header-anchor" href="#_3-how-to-modify-the-default-open-drawing-in-mxcad-integration-project" aria-label="Permalink to &quot;3. How to modify the default open drawing in mxcad integration project&quot;">​</a></h3><p>The query pass <code>{file:&#39;target drawing&#39;}</code> can be done via the iframe&#39;s src attribute, as follows:</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> iframe.src </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;http://localhost:3000/mxcad?file=empty_template.mxweb&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><h3 id="_4-revise-drawing-accuracy" tabindex="-1">4.Revise drawing accuracy <a class="header-anchor" href="#_4-revise-drawing-accuracy" aria-label="Permalink to &quot;4.Revise drawing accuracy&quot;">​</a></h3><p>When the mxweb drawing is opened in mxcad, the graphics display accuracy is not enough, resulting in graphics deviation. For example, the circle on the drawing is displayed as a polygon, because its display accuracy is an empirical value when the drawing is initialized, and mxcad will determine its display accuracy according to the size of the circle.</p><p>Solution 1: Call the redrawing method to adjust the drawing display accuracy.</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { MxCpp } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;mxcad&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Invoke the redraw command</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">MxCpp.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getCurrentMxCAD</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">regen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre></div><p>Solution 2: Manually set the display accuracy value (0 to 1000) when initializing the mxcad project.</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { MxCpp } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;mxcad&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Sets the display precision of an object</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> mxcad</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> MxCpp.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getCurrentMxCAD</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">mxcad.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setAttribute</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({DisplayPrecision:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">900</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><h3 id="_5-text-display" tabindex="-1">5.Text display <a class="header-anchor" href="#_5-text-display" aria-label="Permalink to &quot;5.Text display&quot;">​</a></h3><p>When loading the mxweb drawing in mxcad, the drawing text will be garbled. For example, when you open a drawing, some or all of the text on the drawing is displayed as? This is because the mxcad font file loading path <code>fontspath</code> does not find the target font file corresponding to the text on the drawing.</p><p>Solution 1: All the fonts on the drawing that are not loaded with the corresponding font file are converted to the fonts that have been loaded with the font file in the mxcad project.</p><p>Solution 2: Add the missing font files in the <code>fonts</code> folder in the cloud image development package <code>MxDrawCloudServer\\Bin\\MxCAD\\Release</code> directory, and put the missing font files on the drawing in the front-end project mxcad font file load path&#39; fontspath &#39;. Finally, re-convert the drawing format and open the newly converted drawing with a new front-end project.</p><p><img src="`+n+`" alt="Add font file"></p><h3 id="_6-setting-line-weight-does-not-take-effect" tabindex="-1">6. Setting line weight does not take effect <a class="header-anchor" href="#_6-setting-line-weight-does-not-take-effect" aria-label="Permalink to &quot;6. Setting line weight does not take effect&quot;">​</a></h3><p>Set the solid line weight in mxcad, but it does not take effect in the drawing. This may be due to the mxcad object when the show line weight properties <a href="./../../api/classes/2d.McObject.html#showlineweight">showLineWeight</a> This is caused by not setting.</p><p>Solution: When line weight needs to be displayed, Set mxcad line weight of an object method <a href="./../../api/classes/2d.McObject.html#showlineweight">showLineWeight()</a> true.</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { MxCpp, McDbLine, McCmColor} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;mxcad&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//Draw a straight line</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> drawLine</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> mxcad</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> MxCpp.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getCurrentMxCAD</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Create a new canvas</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  mxcad.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">newFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> line </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> McDbLine</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">500</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">500</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  line.trueColor </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> McCmColor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">255</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  line.lineweight </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 200</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  mxcad.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">showLineWeight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  mxcad.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">drawEntity</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(line);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Invoke the Draw a line method</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">drawLine</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre></div><h3 id="_7-drawing-to-pdf-including-pictures" tabindex="-1">7. Drawing to pdf (including pictures) <a class="header-anchor" href="#_7-drawing-to-pdf-including-pictures" aria-label="Permalink to &quot;7. Drawing to pdf (including pictures)&quot;">​</a></h3><p>We have provided the relevant drawing conversion program for drawing to pdf in the cloud picture development kit. In the process of converting dwg drawings to pdf, we found that the exported pdf did not contain pictures when the drawings contained pictures. This is because the conversion program did not find the target image, so the transferred pdf does not contain the image.</p><p>Solution: Put the picture inserted into the dwg drawing in the same directory as the dwg drawing that needs to be converted, and the pdf that can be converted again will contain the picture inserted in the drawing.</p><h2 id="block" tabindex="-1">Block <a class="header-anchor" href="#block" aria-label="Permalink to &quot;Block&quot;">​</a></h2><h3 id="_1-a-block-is-inserted-multiple-times-to-change-one-of-the-other-blocks" tabindex="-1">1. A block is inserted multiple times to change one of the other blocks <a class="header-anchor" href="#_1-a-block-is-inserted-multiple-times-to-change-one-of-the-other-blocks" aria-label="Permalink to &quot;1. A block is inserted multiple times to change one of the other blocks&quot;">​</a></h3><p>CAD blocks function, it is the default use of reference mode, so one of the other blocks will change with the same. If you do not want to insert a block by reference, you can directly change the block name.</p><p>Using blocks by reference saves memory. If you don&#39;t use references, you have 100 blocks, which is equivalent to 100 different names of memory.</p><h3 id="_2-get-the-target-block-details" tabindex="-1">2. Get the target block details <a class="header-anchor" href="#_2-get-the-target-block-details" aria-label="Permalink to &quot;2. Get the target block details&quot;">​</a></h3><p>We can refer to the entity McDbBlockReference() by calling the CAD block <a href="./../../api/classes/2d.McDbBlockReference.html#getallattribute">getAllAttribute()</a> Method to get all attribute literal object ids referenced by the block, and then get the entity details in the block through the object ids.</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { MxCpp ,McDbBlockReference, McDbAttribute } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;mxcad&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Object selection event</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">MxCpp.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getCurrentMxCAD</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().get.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;selectChange&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">ids</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> McObjectId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[]) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (ids.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">length</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ids[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">];</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> mxent </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> id.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getMxDbEntity</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ent </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> id.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getMcDbEntity</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (ent </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (ent </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">instanceof</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> McDbBlockReference</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> blkRef</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> McDbBlockReference</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ent;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> aryId </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> blkRef.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getAllAttribute</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    aryId.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">forEach</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> attribt</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> McDbAttribute</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> id.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getMcDbEntity</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> any</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(attribt.textString);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(attribt.tag);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre></div><h2 id="layer" tabindex="-1">layer <a class="header-anchor" href="#layer" aria-label="Permalink to &quot;layer&quot;">​</a></h2><h3 id="_1-object-filtering" tabindex="-1">1. Object filtering <a class="header-anchor" href="#_1-object-filtering" aria-label="Permalink to &quot;1. Object filtering&quot;">​</a></h3><p>In CAD, layers allow users to organize graphic objects into different layers for easy management and editing. Each layer has its own unique characteristics, such as color, line type, line width, etc., which determine how the objects on the layer are displayed. We can set <a href="./../../api/classes/2d.MxCADResbuf.html#class-mxcadresbuf">MxCADResbuf</a> Filter to implement object filtering on the layer.</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { MxCADSelectionSet } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;mxcad&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ss </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MxCADSelectionSet</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Get the graph, line, circle, arc, polysemy, object on layer 0.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ss.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">allSelect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MxCADResbuf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([DxfCode.kEntityType, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;LINE,ARC,CIRCLE,LWPOLYLINE&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,DxfCode.kLayer,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;0&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Get object number:&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ss.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">count</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span></code></pre></div><h2 id="updated-version" tabindex="-1">Updated version <a class="header-anchor" href="#updated-version" aria-label="Permalink to &quot;Updated version&quot;">​</a></h2><p>An unsuccessful call or error may occur while running the project call API: This is not a function, etc., because the API in the mxcad call is the latest version, and the mxcad version in the project is not updated, so it is necessary to ensure that the mxcad and mxdraw in the project are the latest version.</p><p>After clearing the project cache and browser cache, uninstall and reinstall. To clear the browser cache, refer to the following operations:</p><p><img src="`+h+`" alt="Alt text"></p><p>The project cache can be cleared by running the command npm as an example:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cache</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clean</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --force</span></span></code></pre></div><p>Uninstall mxcad and mxdraw, and download the latest version of mxcad and mxdraw. Take npm as an example:</p><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> uni</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mxcad</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mxdraw</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mxcad@latest</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mxdraw@latest</span></span></code></pre></div><p>After the update is complete, you can check to see if the version number of the dependency package is the same as the latest version of the npm library. <img src="`+l+'" alt="Alt text"></p><p>Or, check the log to run the project in the version number of the print <a href="https://demo.mxdraw3d.com:3000/mxcad/" target="_blank" rel="noreferrer">online demo</a> in the log print version number <img src="'+p+'" alt="Alt text"></p><h2 id="mxcad-app-application-integration" tabindex="-1">MxCAD APP application integration <a class="header-anchor" href="#mxcad-app-application-integration" aria-label="Permalink to &quot;MxCAD APP application integration&quot;">​</a></h2><h3 id="_1-how-to-modify-the-ui-of-the-app" tabindex="-1">1. How to modify the UI of the APP <a class="header-anchor" href="#_1-how-to-modify-the-ui-of-the-app" aria-label="Permalink to &quot;1. How to modify the UI of the APP&quot;">​</a></h3><ol><li><p>If you simply modify the page layout on the basis of the original MxCAD App interface, refer to <a href="./../7.BestPractice/2.MxCADAPPApplicationIntegration/1.BasicDescriptionOfProjectIntegration.html">MxCAD APP online CAD Preparation Instructions</a>, Modify the mxUiConfig.json file to configure the interface as required.</p></li><li><p>If you want to customize the interface, you can implement your own UI in the project, and then insert your own UI in the target location according to ID, class, attribute, etc.</p></li></ol><ul><li><p>Draw the UI interface in the project <img src="'+k+'" alt="Alt text"></p></li><li><p>Insert the drawn UI into the target location <img src="'+r+`" alt="Alt text"></p></li></ul><p>In addition, you can also directly create elements to insert into the target position, where the target position needs to be obtained by yourself, get its corresponding element and insert the element or component you wrote into it.</p><h3 id="_2-how-to-change-the-text-font" tabindex="-1">2. How to change the text font <a class="header-anchor" href="#_2-how-to-change-the-text-font" aria-label="Permalink to &quot;2. How to change the text font&quot;">​</a></h3><p>Passed during project initialization <a href="./../../api/classes/2d.McAppType.html#addnetworkloadingtruetypefont">MxCpp.App.addNetworkLoadingTrueTypeFont()</a> method to set our system needs to load which fonts, convenient for later when we modify the font loading use.</p><p>Then get the text entity, and finally set the textStyle property of the text to the target text font style.</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { MxFun } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;mxdraw&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { MxCpp } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;mxcad&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// The MxCAD is created successfully. Procedure</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">MxFun.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;mxcadApplicationCreatedMxCADObject&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">param</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // addNetworkLoadingTrueTypeFont([Font name],[Font Chinese name],[font file])</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    MxCpp.App.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addNetworkLoadingTrueTypeFont</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;simsun&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;syadobe&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;思原宋体&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;思原黑体&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;stadobe.otf&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;syadobe.otf&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Modify text style</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Mx_Test_TrueText</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(){</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> mxcad </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> MxCpp.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getCurrentMxCAD</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    //Clear the current display</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    mxcad.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">newFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    MxCpp.App.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">loadFonts</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([], [], [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;syadobe&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;simsun&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">], () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // Add a boldface text style</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        mxcad.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">AddTureTypeTextStyle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ht_style&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;syadobe&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // Add a typeface text style</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        mxcad.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">AddTureTypeTextStyle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;st_style&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;simsun&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // Set the current style to bold</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        mxcad.drawTextStyle </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;ht_style&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        mxcad.drawColor </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> McCmColor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">200</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">255</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> idText </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> mxcad.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">drawText</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3500</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;绘图控件TrueType文字测试&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ent </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> idText.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getMcDbEntity</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // Change the text style to Song Typeface</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ent) ent.textStyle </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;st_style&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        mxcad.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">zoomAll</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        mxcad.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">regen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        mxcad.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">updateDisplay</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="_3-add-font-file" tabindex="-1">3.Add font file <a class="header-anchor" href="#_3-add-font-file" aria-label="Permalink to &quot;3.Add font file&quot;">​</a></h3><p>Some commonly used font files are stored in mxcad projects, but we often encounter that some target drawings need to load their own special font files. When this drawing is first opened in the mxcad project, the text style will be deviated from the display in AutoCAD, and the font text will be displayed as &quot;? &quot;. , or the font style does not meet expectations.</p><p>We can copy the target font file to the <code>MxDrawCloudServer\\Bin\\MxCAD\\Release\\fonts</code> directory in the mxcad project to add the target font file required by the drawing.</p><p><img src="`+d+'" alt="Alt text"></p><h3 id="_4-updated-drawing-watermark-display" tabindex="-1">4.Updated drawing watermark display <a class="header-anchor" href="#_4-updated-drawing-watermark-display" aria-label="Permalink to &quot;4.Updated drawing watermark display&quot;">​</a></h3><p>After modifying the watermark of the drawing, we will provide the cloud image development kit after modifying the watermark. Open the project in the MxCAD project of the development kit, and you can directly see the modified version of the watermark of the drawing. If you need to use the modified watermarking effect in other MxCAD projects, you need to replace the related files in the wasm folder in the mxcad dependency package as follows:</p><ol><li>Extract the modified watermark cloud image development kit, find the catalogue of <code>MxDrawCloudServer\\SRC\\TsWeb\\public\\mxcad\\assets</code>目录。</li><li>Copy the js files and wasm files in the above directories to wasm under the mxcad dependency package of the target project.</li></ol><ul><li>Select <code>mxdrawassembly_min.js</code> and <code>mxdrawassembly_min.wasm </code> in <code> MxDrawCloudServer\\SRC\\TsWeb\\public\\mxcad\\assets</code> <code>mxdrawassembly_min.worker.js</code> three files are copied into the target project<code>\\node_modules\\mxcad\\dist\\wasm\\2d</code>folder; Then copy the <code>mxdrawassembly_min.js&#39; and&#39; mxdrawassembly_minst.wasm </code> files into the <code>\\node_modules\\mxcad\\dist\\wasm\\2d-st</code> folder of the target project. There is a hash code in the name of the copied file, and the file must be renamed to remove the hash code in the middle when it is placed in the <code>2d</code> folder. <img src="'+o+'" alt="Alt text"><img src="'+E+'" alt="Alt text"></li><li>After replacing the files, delete all cache files in the <code>node_modules</code> folder of the target project, such as all files in the <code>.vite</code> folder (you can directly delete the <code>.vite</code> folder), and then clear the browser cache.</li><li>Restart the project and see the results.</li></ul><div class="tip custom-block"><p class="custom-block-title">Look out</p><p><code>MxDrawCloudServer\\SRC\\TsWeb\\public\\mxcad\\assets</code> directory has two <code> mxdrawassembly_min.js</code> files, the two file names in the hash code is different, the file size is also different. These two files need to be copied to the corresponding <code>2d</code> and <code>2D-st</code> folders respectively. Under normal circumstances, the <code>2d</code> folder under the <code>mxdrawassembly_min.js</code> file size will be a little larger, in the replacement need to pay attention to.</p></div><h3 id="_5-set-up-to-load-extension-data" tabindex="-1">5. Set up to load extension data <a class="header-anchor" href="#_5-set-up-to-load-extension-data" aria-label="Permalink to &quot;5. Set up to load extension data&quot;">​</a></h3><p>When the node.js background service is started through the cloud map development kit, it may occur that the extended data in the drawing cannot be read when the dwg drawing is opened. This is because in order to increase the rate at which the program converts drawings, we default to not loading extended data when opening dwg files. If you need to be able to read the extended data after loading the drawing, you need to set the read_exdata property of the mxcad_ini.json file in the MxDrawCloudServer\\Bin\\MxCAD\\Release directory to true and restart the service. After clearing the cache or opening the drawing without using the cache, the extended data in the drawing can be read.</p><p><img src="'+c+'" alt="Alt text"></p><h3 id="_6-update-mxcad-app" tabindex="-1">6. Update MxCAD APP <a class="header-anchor" href="#_6-update-mxcad-app" aria-label="Permalink to &quot;6. Update MxCAD APP&quot;">​</a></h3><p>The MxCAD project provided in the cloud map development kit is a test module in the MxCAD APP. The project is packaged as a js file, which will eventually be put into the &#39;dist\\plugins&#39; in the same directory as the MxCAD project. Moreover, MxCAD and mdraw referenced in mxcad are all dependent on the dist directory. Therefore, in order to update the MxCAD APP, it is necessary to copy and paste all files in the dist directory in the latest cloud image development kit to the original dist directory.</p><p><img src="'+g+`" alt="Alt text"></p><h3 id="_7-update-the-back-end-conversion-program" tabindex="-1">7. Update the back-end conversion program <a class="header-anchor" href="#_7-update-the-back-end-conversion-program" aria-label="Permalink to &quot;7. Update the back-end conversion program&quot;">​</a></h3><p>As with the above steps to update the MxCAD APP, we only need to copy and paste all the conversion procedures under the &#39;MxDrawCloudServer\\Bin&#39; directory that provides the back-end service in the latest cloud image development kit to the original directory where the back-end service is located to replace it.</p><h2 id="other" tabindex="-1">Other <a class="header-anchor" href="#other" aria-label="Permalink to &quot;Other&quot;">​</a></h2><h3 id="_1-instructions-for-using-object-id-handles" tabindex="-1">1. Instructions for using object ID handles <a class="header-anchor" href="#_1-instructions-for-using-object-id-handles" aria-label="Permalink to &quot;1. Instructions for using object ID handles&quot;">​</a></h3><p>ID and handle are used to identify an object, ID is a 64-bit long integer variable, is a memory address, the fastest access, but it is different every time you open, if you need to store the identity of an object, the next time you can find the object, you need to use a handle, a handle is a string variable, It guarantees that no matter what time, the handle is unique in the DWG drawing, and the ID is unique in memory.</p><ul><li>Find an object by a handle</li></ul><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { MxCpp, McDbDatabase } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;mxcad&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Find an object by a handle</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> handle</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;6e78&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> dataBase</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> McDbDatabase</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> MxCpp.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getCurrentMxCAD</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getDatabase</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> objectId</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dataBase.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">handleToIdIndex</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(handle);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> entity</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> objectId.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getMxDbEntity</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(entity){</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Target entity object&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,entity);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><ul><li>Find a handle through an entity object</li></ul><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { MxCpp, McObjectId } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;mxcad&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> getEntity </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MxCADUiPrEntity</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  getEntity.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Select target object&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> entId </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> getEntity.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">go</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">entId.id) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // The graph data object is obtained from the ID object</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ent </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> entId.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getMcDbEntity</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ent) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Get the handle from the graph data object</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> handle </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ent.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getHandle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Target object handle&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,handle);</span></span></code></pre></div><h3 id="_2-close-the-mobile-terminal-three-view" tabindex="-1">2. Close the mobile terminal three-view <a class="header-anchor" href="#_2-close-the-mobile-terminal-three-view" aria-label="Permalink to &quot;2. Close the mobile terminal three-view&quot;">​</a></h3><p>In the mxcad mobile demo, a rotating screen may appear, and the contents of the drawing are regarded as 3 objects and will rotate along the Z axis. This is because the mxcad object has turned on the three-view rotation. You can close the three-view and return to the 2d view by following the code:</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { MxCpp } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;mxcad&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;  </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> mxcad</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> MxCpp.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getCurrentMxCAD</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">mxcad.mxdraw.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getOrbitControls</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().touches.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ONE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> THREE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">TOUCH</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">PAN</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div>`,88)])])}const w=i(y,[["render",F]]);export{x as __pageData,w as default};
